{"ast":null,"code":"import _toConsumableArray from\"/Users/user/Desktop/SOLO_MVP/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/user/Desktop/SOLO_MVP/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Desktop/SOLO_MVP/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/Desktop/SOLO_MVP/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),backendData=_useState2[0],setBackendData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chatData=_useState4[0],setChatData=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];// useEffect(() => {\n//   async function fetchData() {\n//     const response = await fetch(\"http://localhost:3000/api\");\n//     console.log(response);\n//     const data = await response.json();\n//     console.log(data);\n//     setBackendData(data);\n//     console.log(data);\n//   }\n//   fetchData();\n// }, []);\nuseEffect(function(){function fetchChatData(){return _fetchChatData.apply(this,arguments);}function _fetchChatData(){_fetchChatData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3000/api/chat\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setChatData(data);console.log(data);case 8:case\"end\":return _context.stop();}},_callee);}));return _fetchChatData.apply(this,arguments);}fetchChatData();},[]);var handleNameChange=function handleNameChange(e){setName(e.target.value);};var handleMessageChange=function handleMessageChange(e){setMessage(e.target.value);};var handleSend=function handleSend(){// メッセージと日時をサーバーに送信\nvar timestamp=new Date().toISOString();fetch(\"http://localhost:3000/api/chat\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,message:message,timestamp:timestamp})}).then(function(response){return response.json();}).then(function(newMessage){// 送信後に表示を更新\nsetChatData([].concat(_toConsumableArray(chatData),[newMessage]));console.log(newMessage);setMessage(\"\");}).catch(function(error){console.error(\"Error sending chat message:\",error);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uFF1CEV\\u6642\\u4EE3\\u3092\\u8003\\u3048\\u308B\\uFF1E\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u203B\\u30DE\\u30CA\\u30FC\\u3092\\u5B88\\u3063\\u3066\\u6295\\u7A3F\\u3057\\u307E\\u3057\\u3087\\u3046\"}),chatData.map(function(message,i){return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",marginBottom:\"10px\"},children:[/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:\"2ch\"},children:[\"\\u540D\\u524D:\\u3010 \",message.name,\" \\u3011\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{marginRight:\"2ch\"},children:[\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8: \\u300E \",message.message,\" \\u300F\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6295\\u7A3F\\u65E5\\u6642: \",message.created_at]})]},i);}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:handleNameChange,placeholder:\"\\u3053\\u3053\\u306B\\u540D\\u524D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:handleMessageChange,placeholder:\"\\u3053\\u3053\\u306B\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,children:\"\\u6295\\u7A3F\\uFF01\\uFF01\"})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","backendData","setBackendData","_useState3","_useState4","chatData","setChatData","_useState5","_useState6","name","setName","_useState7","_useState8","message","setMessage","fetchChatData","_fetchChatData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","console","log","stop","handleNameChange","e","target","value","handleMessageChange","handleSend","timestamp","Date","toISOString","method","headers","body","JSON","stringify","then","newMessage","concat","_toConsumableArray","catch","error","children","map","i","style","display","marginBottom","marginRight","created_at","type","onChange","placeholder","onClick"],"sources":["/Users/user/Desktop/SOLO_MVP/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nfunction App() {\n  const [backendData, setBackendData] = useState([]);\n  const [chatData, setChatData] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  // useEffect(() => {\n  //   async function fetchData() {\n  //     const response = await fetch(\"http://localhost:3000/api\");\n  //     console.log(response);\n  //     const data = await response.json();\n  //     console.log(data);\n  //     setBackendData(data);\n  //     console.log(data);\n  //   }\n  //   fetchData();\n  // }, []);\n\n  useEffect(() => {\n    async function fetchChatData() {\n      const response = await fetch(\"http://localhost:3000/api/chat\");\n      const data = await response.json();\n      setChatData(data);\n      console.log(data);\n    }\n    fetchChatData();\n  }, []);\n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  const handleSend = () => {\n    // メッセージと日時をサーバーに送信\n    const timestamp = new Date().toISOString();\n    fetch(\"http://localhost:3000/api/chat\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ name, message, timestamp }),\n    })\n      .then((response) => response.json())\n      .then((newMessage) => {\n        // 送信後に表示を更新\n        setChatData([...chatData, newMessage]);\n        console.log(newMessage);\n        setMessage(\"\");\n      })\n      .catch((error) => {\n        console.error(\"Error sending chat message:\", error);\n      });\n  };\n\n  return (\n    <div>\n      {/* {typeof backendData.users === \"undefined\" ? (\n        <p>Loading...</p>\n      ) : (\n        backendData.users.map((user, i) => <p key={i}>{user}</p>)\n      )} */}\n      <h1>＜EV時代を考える＞</h1>\n      <h2>※マナーを守って投稿しましょう</h2>\n      {chatData.map((message, i) => (\n        <div key={i} style={{ display: \"flex\", marginBottom: \"10px\" }}>\n          <span style={{ marginRight: \"2ch\" }}>名前:【 {message.name} 】</span>\n          <span style={{ marginRight: \"2ch\" }}>\n            メッセージ: 『 {message.message} 』\n          </span>\n          <span>投稿日時: {message.created_at}</span>\n        </div>\n      ))}\n\n      <div>\n        <input\n          type=\"text\"\n          value={name}\n          onChange={handleNameChange}\n          placeholder=\"ここに名前\"\n        />\n\n        <input\n          type=\"text\"\n          value={message}\n          onChange={handleMessageChange}\n          placeholder=\"ここにメッセージ\"\n        />\n\n        <button onClick={handleSend}>投稿！！</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}